<!DOCTYPE html>

<html lang="sk">
<head>
    <meta charset="utf-8" />
    <title>Raspberry pi</title>
    <link rel="stylesheet" type="text/CSS" href="bakalarka.css">
    <link rel="shortcut icon" href="obrazky/favicon.ico">
    <meta author="Jakub Švajka" />

    <script type="text/javascript" src="js/navbox.js"></script>
</head>
<body>
    <header>
        <div class="container">
            <a href="https://www.fei.stuba.sk/">
                <img src="obrazky/logo_fei.png" alt="Slovenská Technická Univerzita Fakulta Elektrotechniky a Informatiky" />
            </a>
        </div>
        <nav id="nav">
            <ul class="container">
                <li><a href="index.html">DOMOV</a></li>
                <li><a href="sdr.php">SDR</a></li>
                <li><a href="teplota.html">TEPLOTA</a></li>
                <li><a href="dokumentacia.html">DOKUMENTÁCIA</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <div class="container" id="box">
            <div class="block_container">
                <div class="block_header">
                    Obsah
                </div>
                <div class="block_body">
                    <ul>
                        <li><a href="#Zadanie">Zadanie</a></li>
                        <li><a href="#DS18B20">DS18B20</a></li>
                        <li><a href="#MySQL">MySQL</a></li>
                        <li><a href="#SNMP">SNMP</a></li>
                        <li><a href="#One-Wire">One-Wire</a></li>
                        <li><a href="#I2C">I2C</a></li>
                    </ul>
                </div>
            </div>

            <div class="block_container" id="Zadanie">
                <div class="block_header">
                    Zadanie
                </div>
                <div class="block_body">
                    <table>
                        <tbody>
                            <tr>
                                <td>Typ práce:</td>
                                <td class="margin_left">Bakalárska práca</td>
                            </tr>
                            <tr>
                                <td>Názov témy:</td>
                                <td class="margin_left">Raspberry Pi ako dátový prezentačný systém</td>
                            </tr>
                            <tr>
                                <td>Vedúci práce:</td>
                                <td class="margin_left">prof. Ing. René Harťanský, PhD.</td>
                            </tr>
                            <tr>
                                <td>Fakulta:</td>
                                <td class="margin_left">Fakulta elektrotechniky a informatiky</td>
                            </tr>
                            <tr>
                                <td>Garantujúce pracovisko:</td>
                                <td class="margin_left">Ústav elektrotechniky - FEI</td>
                            </tr>
                            <tr>
                                <td>Akademický rok:</td>
                                <td class="margin_left">2018/2019</td>
                            </tr>
                            <tr>
                                <td>Navrhol:</td>
                                <td class="margin_left">prof. Ing. René Harťanský, PhD.</td>
                            </tr>
                        </tbody>
                    </table>
                    <br />
                    <p>
                        <article>Abstrakt:</article>
                        <article>
                            V mnohých priemyselných aplikáciách je potrebné vykonať zber dát, uchovať ich a vhodným spôsobom prezentovať. Veľmi žiadanými riešeniami sú prezentácie pomocou www rozhrania alebo pomocou SNMP "trapov". Úlohou riešiteľa bude pomocou mikropočítača Raspberry Pi zbierať dáta o teplote viacerých objektov dáta uchovávať a prezentovať pomocou html stránky.
                        </article>
                        <article>Úlohy:</article>
                        <article>
                            <ol class="margin_left">
                                <li>Oboznámte sa s mikropočítačom Raspberry Pi, jeho portami a možnosťami zberu digitálnych údajov.</li>
                                <li>Oboznámte sa s princípom fungovania zbernice "One wire" a "I2C".</li>
                                <li>Oboznámte sa s možnosťami databázového servera "MySQL".</li>
                                <li>Oboznámte sa s činnosťou www servera "Apache".</li>
                                <li>Pomocou "One wire" snímačov teploty vykonajte nepretržité snímanie dáta a ich ukladanie do databázy.</li>
                                <li>použite vhodný prostriedok (resp. vytvorte skript), ktorý bude v zadaných časových intervaloch prezentovať dáta z databázy vo forme grafu.</li>
                                <li>Vytvorte technickú dokumentáciu a príručku k obsluhe.</li>
                            </ol>
                        </article>
                    </p>
                    <br />
                    <p>
                        <i>on Debian systems located at <tt>/var/www/html/index.html</tt></i>
                    </p>
                </div>
            </div>

            <div class="block_container" id="DS18B20">
                <div class="block_header">
                    DS18B20
                </div>
                <div class="block_body">
                    <article>
                        <p>
                            Teplomer DS18B20 komunikuje prostredníctvom “One-Wire” komunikačného protokolu, a proprietary serial communication protocol that uses only one wire to transmit the temperature readings to the microcontroller.
                        </p>
                        <br />
                        <p>
                            Teplomer DS18B20 môžeme používať aj v tzv. parazitnom móde. DS18B20 potrebuje tri káble pre správnu prevádzku: Napájanie (Vcc), Uzemnenie (ground), a data kábel. V parazitnom móde sa využíva iba uzemnenie a data káble, pričom teplomer napájame pomocou data kábla.
                        </p>
                        <br />
                        <p>
                            Teplomer DS18B20 taktiež disponuje funkciou, ktorá upozorní užívateľa, keď sa prekročí spodná alebo aj horná hraničná teplota nastavená užívateľom.
                        </p>
                        <br />
                        <p>
                            64 bitová ROM slúži na uloženie unikátneho serioveho kódu zariadenia. Táto 64 bitová adresa umožnuje mikrokontroléru príjmať namerané dáta z virtuálne nekonečného počtu senzorov na tom istom pine. Adresa hovorí mikrokontroléru z ktorého senzoru pochádza nameraná hodnota teploty.
                        </p>
                    </article>
                </div>

                <div class="block_header_mid">
                    Parametre senzora DS18B20:
                </div>
                <div class="block_body">
                    <ul>
                        <li>napájacie napätie je v rozsahu 3,0V až 5,5V</li>
                        <li>počas merania a počas zápisu do EEPROM senzor potrebuje prúd 1,5 mA</li>
                        <li>rozsah meranej teploty je od –55°C do +125°C (-67°F do +257°F)</li>
                        <li>0,5°C (9 bit); 0,25°C (10 bit); 0,125°C (11 bit); 0,0625°C (12 bit) rozlíšenie v rozsahu –10°C do +85°C</li>
                        <li>meranie teploty s rozlíšením 12-bit trvá 750ms</li>
                        <li>obojsmerná poloduplexná prevádzka</li>
                        <li>64 bitov unikátnych adries</li>
                        <li>One-Wire komunikačný protokol</li>
                    </ul>
                    <p>
                        V prípade nejasností ohľadom časovania, nastavenia parazistného napájania, a nastavenia alarmu, pozri datasheet:
                        <a href="DS18B20-Datasheet.pdf">
                            <img src="obrazky/PDF-Icon.png" alt="DS18B20-Datasheet" style="max-width:30px;max-height:30px" />
                        </a>
                    </p>
                </div>

                <div class="block_header_mid">
                    Pamäť senzora DS18B20:
                </div>
                <div class="block_body">
                    <article>
                        <p><strong>Obsahuje 8 bytov</strong></p>
                        <br />
                        <img src="obrazky/DS18B20-Memory_map.png" alt="Topológia pamäte" />
                    </article>
                    <br />
                    <article>
                        <h3>Byte 0 a 1</h3>
                        <div class="tabulka">
                            <table>
                                <tbody>
                                    <tr>
                                        <td></td>
                                        <td><strong>BIT 7</strong></td>
                                        <td><strong>BIT 6</strong></td>
                                        <td><strong>BIT 5</strong></td>
                                        <td><strong>BIT 4</strong></td>
                                        <td><strong>BIT 3</strong></td>
                                        <td><strong>BIT 2</strong></td>
                                        <td><strong>BIT 1</strong></td>
                                        <td><strong>BIT 0</strong></td>
                                    </tr>
                                    <tr>
                                        <td><strong>LS BYTE</strong></td>
                                        <td style="border: 1px solid black;width: 11.11%;">2<sup>3</sup></td>
                                        <td style="border: 1px solid black;width: 11.11%;">2<sup>2</sup></td>
                                        <td style="border: 1px solid black;width: 11.11%;">2<sup>1</sup></td>
                                        <td style="border: 1px solid black;width: 11.11%;">2<sup>0</sup></td>
                                        <td style="border: 1px solid black;width: 11.11%;">2<sup>-1</sup></td>
                                        <td style="border: 1px solid black;width: 11.11%;">2<sup>-2</sup></td>
                                        <td style="border: 1px solid black;width: 11.11%;">2<sup>-3</sup></td>
                                        <td style="border: 1px solid black;width: 11.11%;">2<sup>-4</sup></td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td><strong>BIT 15</strong></td>
                                        <td><strong>BIT 14</strong></td>
                                        <td><strong>BIT 13</strong></td>
                                        <td><strong>BIT 12</strong></td>
                                        <td><strong>BIT 11</strong></td>
                                        <td><strong>BIT 10</strong></td>
                                        <td><strong>BIT 9</strong></td>
                                        <td><strong>BIT 8</strong></td>
                                    </tr>
                                    <tr>
                                        <td><strong>MS BYTE</strong></td>
                                        <td style="border: 1px solid black;width: 11.11%;">S</td>
                                        <td style="border: 1px solid black;width: 11.11%;">S</td>
                                        <td style="border: 1px solid black;width: 11.11%;">S</td>
                                        <td style="border: 1px solid black;width: 11.11%;">S</td>
                                        <td style="border: 1px solid black;width: 11.11%;">S</td>
                                        <td style="border: 1px solid black;width: 11.11%;">2<sup>6</sup></td>
                                        <td style="border: 1px solid black;width: 11.11%;">2<sup>5</sup></td>
                                        <td style="border: 1px solid black;width: 11.11%;">2<sup>4</sup></td>
                                    </tr>
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <td></td>
                                        <td>S = SIGN</td>
                                    </tr>
                                </tfoot>
                            </table>
                            <br />
                            <p>pre 12-bitové rozlíšenie – všetky bity v teplotnom registri budú obsahovať platné údaje.</p>
                            <p>pre 11-bitové rozlíšenie – bit 0 nieje definovaný</p>
                            <p>pre 10-bitové rozlíšenie – bity 1 a 0 sú nedefinované</p>
                            <p>pre 9-bitové rozlíšenie – bity  2, 1 a 0 nie sú definované</p>
                        </div>
                    </article>
                    <br />
                    <article>
                        <div class="tabulka">
                            <table>
                                <tbody>
                                    <tr>
                                        <td><strong>TEMPERATURE (&deg;C)</strong></td>
                                        <td><strong>DIGITAL OUTPUT (BINARY)</strong></td>
                                        <td><strong>DIGITAL OUTPUT (HEX)</strong></td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid black;width: 33.33%;">+125</td>
                                        <td style="border: 1px solid black;width: 33.33%;">0000 0111 1101 0000</td>
                                        <td style="border: 1px solid black;width: 33.33%;">07D0h</td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid black;width: 33.33%;">+85*</td>
                                        <td style="border: 1px solid black;width: 33.33%;">0000 0101 0101 0000</td>
                                        <td style="border: 1px solid black;width: 33.33%;">0550h</td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid black;width: 33.33%;">+25.0625</td>
                                        <td style="border: 1px solid black;width: 33.33%;">0000 0001 1001 0001</td>
                                        <td style="border: 1px solid black;width: 33.33%;">0191h</td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid black;width: 33.33%;">+10.125</td>
                                        <td style="border: 1px solid black;width: 33.33%;">0000 0000 1010 0010</td>
                                        <td style="border: 1px solid black;width: 33.33%;">00A2h</td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid black;width: 33.33%;">+0.5</td>
                                        <td style="border: 1px solid black;width: 33.33%;">0000 0000 0000 1000</td>
                                        <td style="border: 1px solid black;width: 33.33%;">0008h</td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid black;width: 33.33%;">0</td>
                                        <td style="border: 1px solid black;width: 33.33%;">0000 0000 0000 0000</td>
                                        <td style="border: 1px solid black;width: 33.33%;">0000h</td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid black;width: 33.33%;">-0.5</td>
                                        <td style="border: 1px solid black;width: 33.33%;">1111 1111 1111 1000</td>
                                        <td style="border: 1px solid black;width: 33.33%;">FFF8h</td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid black;width: 33.33%;">-10.125</td>
                                        <td style="border: 1px solid black;width: 33.33%;">1111 1111 0101 1110</td>
                                        <td style="border: 1px solid black;width: 33.33%;">FF5Eh</td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid black;width: 33.33%;">-25.0625</td>
                                        <td style="border: 1px solid black;width: 33.33%;">1111 1110 0110 1111</td>
                                        <td style="border: 1px solid black;width: 33.33%;">FE6Fh</td>
                                    </tr>
                                    <tr>
                                        <td style="border: 1px solid black;width: 33.33%;">-55</td>
                                        <td style="border: 1px solid black;width: 33.33%;">1111 1100 1001 0000</td>
                                        <td style="border: 1px solid black;width: 33.33%;">FC90h</td>
                                    </tr>
                                </tbody>
                            </table>
                            <p><em>*The power-on reset value of the temperature register is +85°C.</em></p>
                        </div>
                    </article>
                    <article>
                        <h3>Byte 2 a 3</h3>
                        <p>sú TH a TL bajty a vyžívajú sa na signalizáciu alarmu. Nastavujú sa užívateľom a ich hodnota je porovnávaná s nameranou hodnotou a podľa toho sa nastavuje S bit. Viac v datasheete.</p>
                    </article>
                    <br />
                    <article>
                        <h3>Byte 4</h3>
                        <p>je konfiguračný register. Nastavíme ním rozlíšenie 9 až 12 bitov:</p>
                    </article>
                    <br />
                    <article>
                        <h3>Byte 5, 6, 7</h3>
                        <p>sú rezervované pre interné použitie a nieje možné ich prepísať</p>
                    </article>
                    <br />
                    <article>
                        <h3>Byte 8</h3>
                        <p>je iba na čítanie a obsahuje kód CRC pre bajty 0 až 7 scratchpadu</p>
                    </article>
                </div>

                <div class="block_header_mid">
                    Zapojenie teplomeru DS18B20:
                </div>
                <div class="block_body">
                    <img src="obrazky/wiring.jpg" alt="wiring" />
                    <p>R1: 4,7K Ohm</p>
                </div>

                <div class="block_header_mid">
                    Spustenie One-Wire rozhrania:
                </div>
                <div class="block_body">
                    Predtým než môže Raspberry Pi dostať dáta od senzoru, musíme spustiť One-Wire rozhranie. Najprv musíme pripojiť DS18B20 podľa schémy, potom zapneme naše Pi a nasledujeme tieto kroky:
                    <ol>
                        <li>
                            V príkazovom riadku zadáme:
                            <div class="code">
                                <p><code>sudo nano /boot/config.txt</code></p>
                            </div>
                        </li>
                        <br />
                        <li>
                            Následne zadáme na úplny spodok súboru:
                            <div class="code">
                                <p><code>dtoverlay=w1–gpio</code></p>
                            </div>
                        </li>
                        <br />
                        <li>
                            Opustíme editor <em>nano</em> a reštartujeme naše Pi príkazom:
                            <div class="code">
                                <p><code>sudo reboot</code></p>
                            </div>
                        </li>
                        <br />
                        <li>
                            Znovu sa prihlásime do Pi a do príkazového riadku zadáme:
                            <div class="code">
                                <p><code>sudo modprobe w1–gpio</code></p>
                            </div>
                        </li>
                        <br />
                        <li>
                            Následne zadáme:
                            <div class="code">
                                <p><code>sudo modprobe w1-therm</code></p>
                            </div>
                        </li>
                        <br />
                        <li>
                            Vstúpime do priečinku /sys/bus/w1/devices tak, že zadáme:
                            <div class="code">
                                <p><code>cd /sys/bus/w1/devices</code></p>
                            </div>
                        </li>
                        <br />
                        <li>
                            Pre zobrazenie všetkých súborov nachádzajúcich sa v danom priečinku zadáme:
                            <div class="code">
                                <p><code>ls</code></p>
                            </div>
                        </li>
                        <br />
                        <li>V mojom prípade sa zobrazilo: <code>28-000006637696 w1_bus_master1</code></li>
                        <br />
                        <li>Náš teplotný senzor je ten so samými číslami. Takže zadáme: <code>cd 28-XXXXXXXXXXXX</code> (Nahradte X za svoje čísla). Takže v mojom prípade zadám: <code>cd 28-000006637696</code></li>
                        <br />
                        <li>Ďalej zadáme: <code>cat w1_slave</code>, čo zapríčiní, že sa nám zobrazí neupravená hodnota teploty. Skutočnú teplotu v &deg;C dostaneme tak, že zobrazené čislo vynásobíme čislom 1000.</li>
                        <br />
                        <li>Príkazom <code>cd</code> sa vrátime do root priečinku.</li>
                    </ol>
                    To je všetko, čo je potrebné na spustenie One-Wire rozhrania. Teraz potrebujeme nižšie uvedený program, ktorý bude priebežne vypisovať namerané teploty do konzoly a aj do našej databázy.
                </div>

                <div class="block_header_mid">
                    Zdrojový kód - Python
                </div>
                <div class="block_body">
                    <article>
                        <p>Aby sme mohli pracovať so SQL serverom potrebujeme nainštalovať balíček, ktorý umožnuje komunikáciu medzi python kódom a SQL serverom. Nasledovným príkazom naištalujeme potrebný balíček:</p>
                        <div class="code">
                            <p><code>sudo apt-get install python-mysqldb</code></p>
                        </div>
                    </article>
                    <br />
                    <embed src="temp_code_sql.txt" width="100%" height="300">
                </div>

                <div class="block_header_mid">
                    Zdroje:
                </div>
                <div class="block_body">
                    <ul>
                        <li><a href="http://www.circuitbasics.com/raspberry-pi-ds18b20-temperature-sensor-tutorial">http://www.circuitbasics.com/raspberry-pi-ds18b20-temperature-sensor-tutorial</a></li>
                        <li><a href="https://www.arduinoposlovensky.sk/projekty/dallas-ds18b20">https://www.arduinoposlovensky.sk/projekty/dallas-ds18b20</a></li>
                        <li><a href="https://pimylifeup.com/raspberry-pi-temperature-sensor">https://pimylifeup.com/raspberry-pi-temperature-sensor</a></li>
                    </ul>
                </div>




            </div>

            <div class="block_container" id="MySQL">
                <div class="block_header">
                    Inštalácia MySQL na Raspberry Pi
                </div>
                <div class="block_body">
                    <p>Tento tutorial je určený pre operačný systém Raspbian.</p>
                    <ol>
                        <li>
                            Predtým než naištalujeme MySQL na naše Raspberry Pi, musíme aktualizovať náš <em>package list</em> a všetky naištalované balíčky. Pre vykonanie aktualizácie systému zadáme:
                            <div class="code">
                                <p><code>sudo apt update</code></p>
                                <p><code>sudo apt upgrade</code></p>
                            </div>
                        </li>
                        <br />
                        <li>
                            MySQL naištalujeme jednoduchým príkazom:
                            <div class="code">
                                <p><code>sudo apt install mariadb-server</code></p>
                            </div>
                        </li>
                        <br />
                        <li>
                            Ďalším krokom je zabezpečiť databázy heslom pre užívateľa <em>root</em>. Tento krok nie je potrebný pre správne fungovanie MySQL.
                            Štandardne je MySQL pri inštalácii nastavené bez hesla, čo znamená, že sa môžeme dostať do MySQL bez akejkoľvek autorizácie.
                        </li>
                        <br />
                        <li>
                            Pre nastavenie zabezpečenia MySQL zadáme nasledovný príkaz:
                            <div class="code">
                                <p><code>sudo mysql_secure_installation</code></p>
                            </div>

                        </li>
                        <br />
                        <li>
                            <p>
                                Počas inštalácie sa nás bude program pýtať, či chceme ďalšie zabezpečenia. Pre lepšie zabezpečenie nášho servera by sme mali odpovedať na každú výzvu <em>'Y'</em>. To zapríčiní, že sa odstránia určité vlastnosti, ktoré umožnujú jednoduchý prístup do serveru.
                            </p>
                            <p>Nezabudnite si poznačiť vaše heslo, aby ste si ho mohli pripomenúť ak ho zabudnete.</p>
                        </li>
                        <br />
                        <li>
                            <p>Teraz môžeme vstúpiť do nášho MySQL servera zadaním nasledovného príkazu:</p>
                            <div class="code">
                                <p><code>sudo mysql -u root -p</code></p>
                            </div>
                            <p>Program nás vyzve, aby sme zadali heslo (heslo, ktoré sme práve vytvorili).</p>
                            <p><em>Poznámka: Väčšina Linux systémov nevypisuje heslo do konzoly.</em></p>
                        </li>
                        <br />
                        <li>V prípade, že sme zadali heslo správne, môžeme odteraz spravovať databázy. Taktiež môžeme vytvoriť alebo zmazať užívateľov a priradiť im práva pre spravovanie databáz. Existujú dva spôsoby ako opustiť príkazový riadok MySQL. Prvý je, že zadáme <code>quit</code> do konzoly. Druhý spôsob je, že použijeme klávesovu kombináciu <em>CTRL + D</em>.</li>
                    </ol>
                </div>

                <div class="block_header_mid">
                    Creating a MySQL Database and User
                </div>
                <div class="block_body">
                    <ol>
                        <li>
                            <p>Before we proceed to create a MySQL user and database on our Raspberry Pi, we must first log back into the MySQL command-line tool.</p>
                            <p>Run the following command to log in to the MySQL command line. You will be prompted to enter the password for the “root” account that you set up earlier.</p>
                            <div class="code">
                                <p><code>sudo mysql -u root -p</code></p>
                            </div>
                        </li>
                        <br />
                        <li>
                            <p>Let’s start by creating a MySQL database using the following command. This command is super simple and is just “CREATE DATABASE” followed by the name that you want to give the database.</p>
                            <p>In our example, we will be calling this database “exampledb“.</p>
                            <div class="code">
                                <p><code>CREATE DATABASE exampledb;</code></p>
                            </div>
                        </li>
                        <br />
                        <li>
                            <p>Next, we will create a MySQL user that we will assign to our new database. We can create this user by running the following command.</p>
                            <p>For this example, we will be calling the user “exampleuser” and giving it the password “pimylifeup“. When creating your own, make sure you replace both of these.</p>
                            <div class="code" style="width:66%">
                                <p><code>CREATE USER 'exampleuser'@'localhost' IDENTIFIED BY 'pimylifeup';</code></p>
                            </div>
                        </li>
                        <br />
                        <li>
                            <p>With the user created, we can now go ahead and grant all privileges to the user so that it can interact with the database.</p>
                            <p>This command will grant all permissions to our “exampleuser” for all tables within our “exampledb” database.</p>
                            <div class="code" style="width:66%">
                                <p><code>GRANT ALL PRIVILEGES ON exampledb.* TO 'exampleuser'@'localhost';</code></p>
                            </div>
                        </li>
                        <br />
                        <li>
                            <p>The final thing we need to do for both our MySQL database and user to be finalized is to flush the privilege table. Without flushing the privilege table, the new user won’t be able to access the database.</p>
                            <p>We can do this by running the following command.</p>
                            <div class="code">
                                <p><code>FLUSH PRIVILEGES;</code></p>
                            </div>
                        </li>
                    </ol>

                </div>

                <div class="block_header_mid">
                    Installing the PHP MySQL Connector
                </div>
                <div class="block_body">
                    <p>If you intend on using a MySQL database from PHP, you will need to make sure that you have the module installed.</p>
                    <p>You can install the MySQL connector for PHP to your Raspberry Pi by running the following command.</p>
                    <div class="code">
                        <p><code>sudo apt install php-mysql</code></p>
                    </div>
                    <br />
                    <p>As I mentioned earlier, there are many projects where a database will come in handy. Most modern websites will require a database to be able to function correctly. At this point of the tutorial you should now have a MySQL server up and running on your Raspberry Pi.</p>
                </div>

                <div class="block_header_mid">
                    Záklané príkazy pre prácu so SQL serverom
                </div>
                <div class="block_body">
                    <p>Do databázy vstúpime pomocou príkazu:</p>
                    <div class="code">
                        <p><code>sudo mysql</code></p>
                    </div>
                    <br />
                    <div class="code">
                        <p><code>show databases;</code></p>
                        <p><code>CREATE database bakalarka;</code></p>
                        <p><code>show tables in bakalarka;</code></p>
                        <p><code>use bakalarka;</code></p>
                        <p><code>show tables;</code></p>
                    </div>
                    <br />
                    <p>Príklad na CREATE:</p>
                    <div class="code" style="width:66%">
                        <p><code>CREATE table temperature</code></p>
                        <p><code>(</code></p>
                        <p><code>id int not null auto_increment primary key,</code></p>
                        <p><code>temp float,</code></p>
                        <p><code>datetime timestamp default current_timestamp</code></p>
                        <p><code>);</code></p>
                    </div>
                    <br />
                    <p>Príklad na INSERT:</p>
                    <div class="code" style="width:66%">
                        <p><code>INSERT INTO temperature (temp) VALUES (30.0);</code></p>
                    </div>
                    <br />
                    <p>Príklad na UPDATE:</p>
                    <div class="code" style="width:66%">
                        <p><code>UPDATE temperature SET temp=15.0, datetime=NOW() WHERE id=1;</code></p>
                    </div>
                    <br />
                    <p>Príklady na DELETE:</p>
                    <div class="code" style="width:66%">
                        <p><code>DELETE FROM users WHERE title='Mrs'; 	//this will delete all Mrs</code></p>
                        <p><code>DELETE FROM MARKS WHERE ID=(SELECT MAX(id) FROM MARKS);   //this deletes last record(row)</code></p>
                        <p><code>drop table temperature;  //this will delete that table completely</code></p>
                        <p><code>drop database bakalarka; //this will delete that database completely</code></p>
                    </div>
                    <br />
                    <p>Príklad na TRUNCATE:</p>
                    <div class="code" style="width:66%">
                        <p><code>TRUNCATE TABLE temperature;</code></p>
                        <p><code>&nbsp;&nbsp;&nbsp;//deletes the data inside a table, but not the table itself</code></p>
                    </div>
                    <br />
                    <p>Príklady na SELECT:</p>
                    <div class="code" style="width:66%">
                        <p><code>SELECT * FROM temperature;</code></p>
                        <p><code>SELECT id, temp, TIME(datetime) FROM temperature;</code></p>
                        <p><code>show fields FROM bakalarka;</code></p>
                        <p><code>SELECT * FROM bakalarka ORDER BY datetime desc;</code></p>
                        <p><code>&nbsp;&nbsp;&nbsp;//zoradi od najväčšieho po najmenšie (zostupne)</code></p>
                        <p><code>SELECT * FROM bakalarka WHERE (temp>30.0);</code></p>
                        <p><code>SELECT * FROM bakalarka WHERE (first_name like "%ard");</code></p>
                        <p><code>&nbsp;&nbsp;&nbsp;//vsetky mena konciace na ard</code></p>
                    </div>
                    <br />
                    <div class="code" style="width:66%">
                        <p><code>SELECT * FROM (</code></p>
                        <p><code>&nbsp;&nbsp;&nbsp;SELECT *</code></p>
                        <p><code>&nbsp;&nbsp;&nbsp;FROM temperature</code></p>
                        <p><code>&nbsp;&nbsp;&nbsp;WHERE datetime > timestamp(DATE_SUB(NOW(), INTERVAL 30 MINUTE))</code></p>
                        <p><code>&nbsp;&nbsp;&nbsp;ORDER BY datetime desc</code></p>
                        <p><code>&nbsp;&nbsp;&nbsp;LIMIT 10</code></p>
                        <p><code>) t</code></p>
                        <p><code>ORDER BY datetime asc;</code></p>
                    </div>
                </div>

                <div class="block_header_mid">
                    Zdroje:
                </div>
                <div class="block_body">
                    <ul>
                        <li><a href="https://pimylifeup.com/raspberry-pi-mysql/">https://pimylifeup.com/raspberry-pi-mysql</a></li>
                    </ul>
                </div>
            </div>

            <div class="block_container" id="SNMP">
                <div class="block_header">
                    SNMP
                </div>
                <div class="block_body">
                    <p>SNMP - Simple Network Management Protocol</p>
                    <br />
                    <h4>Architektúra SNMP rozoznáva prinajmenšom 2 komponenty:</h4>
                    <ol>
                        <li>Spravovaný objekt (SNMP agent, napr. na prepínači)</li>
                        <li>Spravovacia stanica (napr. SNMP platforma)</li>
                    </ol>
                    <p>Môže obsahovať subagentov (slave).</p>
                    <p>
                        SNMP protokol definuje operácie nad MIB bázou (Management Information Base). MIB de facto popisuje možné OID (Object identifier) - objekty s ktorými je možné pracovať, ich typ (Integer, Octet String, atď) a možný prístup k nim (read-only, read-write, write-only). Štandardná MIB báza už definuje mnoho premenných (OID, napr. informáciu o agentovi, správu/monitorovanie sieťových rozhraní, smerovacie tabuľky a i.). Výrobcovia zariadení pokrývajú spravidla len časť štandardnej MIB (slušný SNMP agent podporuje aspoň oblasť System Information). MIB je však navrhnutá tak, aby sa dala rozširovať vo vymedzenej privátnej oblasti vlastnou MIB výrobcu.
                    </p>
                    <p>
                        SNMP agent spravidla používa UDP port 161 (a posiela SNMP trapy na UDP port 162). SNMP protokol používa ako prezentačnú vrstvu ASN.1.
                    </p>
                </div>

                <div class="block_header_mid">
                    Inštalácia SNMP na Raspberry Pi 3
                </div>
                <div class="block_body">
                    <p>Do konzoly zadáme príkaz:</p>
                    <div class="code">
                        <p><code>sudo apt-get update</code></p>
                        <p><code>sudo apt-get install snmpd</code></p>
                        <p><code>sudo apt-get install snmp</code></p>
                    </div>
                </div>

                <div class="block_header_mid">
                    Zdroje:
                </div>
                <div class="block_body">
                    <ul>
                        <li><a href="https://bigdanzblog.wordpress.com/2015/01/03/installing-snmp-onto-a-raspberry-pi">https://bigdanzblog.wordpress.com/2015/01/03/installing-snmp-onto-a-raspberry-pi</a></li>
                        <li><a href="https://sk.wikipedia.org/wiki/Jednoduch%C3%BD_mana%C5%BE%C3%A9rsky_protokol_siete">https://sk.wikipedia.org/wiki/Jednoduch%C3%BD_mana%C5%BE%C3%A9rsky_protokol_siete</a></li>
                    </ul>
                </div>
            </div>

            <div class="block_container" id="One-Wire">
                <div class="block_header">
                    One-Wire
                </div>
                <div class="block_body">
                    <p><strong>1-Wire</strong> je spôsob komunikácie založený na princípe <em>bus system</em>, ktorý bol vyvinutý spoločnosťou <em>Dallas Semiconductor Corp.</em></p>
                    <p>
                        1-Wire je podobný ako I²C, ale rozdiel je ten, že 1-Wire má menšiu rýchlosť prenosu informácii a dokáže komunikovať na väčšie vzdialenosti. One-Wire zvyčajne používame na komunikáciu s menšími, jednoduchšími zariadeniami ako napríklad digitálny teplomer a ďalšie senzory na meranie a predpoveď počasia. Sieť zariadení využívajúcich 1-Wire protokol s priradeným <em>master</em> zariadením nazývame MicroLAN.
                    </p>
                    <p>
                        Jedna zo zaujímavých vlastností zbernice je, že nám stačí použiť iba dva káble, tento mód nazývame parazitný mód. Umožňuje nám to zabudovaný 800 pF kondenzátor, ktorý uchováva náboj a napája zariadenie počas doby, keď je dátova zbernica aktívna.
                    </p>

                </div>

                <div class="block_header_mid">
                    Komunikačný protokol
                </div>
                <div class="block_body">
                    <article>
                        <p>V MicroLAN sieti, máme vždy jedného <em>master</em>, zvyčajne stolný počítač alebo mikrokontróler. <em>Master</em> iniciuje aktivitu na zbernici, čo zjednodušuje predchádzanie kolíziám na zbernici. Komukačné protokoly na zistenie kolízie sú zabudované v masterovom softvéry. Ak zistí, že zbernica je obsadená, pokúsi sa zopakovať vyžiadanú komunikáciu.</p>
                        <p>1-Wire sieť je tvorená jedným otvoreným drôtom s jedným pull-up rezistorom. Tento pull-up rezistor stiahne potenciál drôtu na 3 alebo 5 voltov. Napriek názovu 1-Wire, musia mať všetky zariadenia v sieti aj druhý, ground, kábel umožňujúci prietok elektrického prúdu cez data kábel. Komunikácia začína v momente, keď master alebo slave na chvíľu stiahne potenciál zbernice na logickú nulu, tj. pripojí prostredníctvom pull-up rezistora zbernicu na kábel uzemnenia cez jeho MOSFET výstup. Keď neprebieha komunikácia, dáta kábel má logickú jednotku, čo umožnuje napájanie konečný počet ďalších slave zariadení v sieti. Rýchlosť prenosu dát je 16.3 kbit/s. K dispozícii máme aj <em>overdrive mode</em>, ktorý zvyšuje rýchlosť prenosu dát desaťnásobne.</p>
                    </article>
                    <article>
                        <p>Master začína prenos tak, že vyšle resetujúci pulz, čo znamená, že stiahne potenciál dátovej zbernice na 0 voltov po dobu 480 µs. Tento pulz zresetuje každé slave zariadenie v sieti. Následne, nejaké slave zariadenie, ak je prítomné, sa ohlási, že je pripojené krátkym "presence" pulzom tak, že podrží zbernicu na logickej nule ďalších 60 µs po tom, čo master uvoľnil zbernicu naspäť na logickú jednotku.</p>
                        <p>Aby sme poslali logickú jednotku, master vyšle veľmi krátky (1-15 µs) pulz s logickou hodnotou nula. Aby sme poslali logickú nulu, master vyšle dlhší (60 µs) pulz s logickou hodnotou nula. Dobežná hrana signálu spúšťa monostabilný multivibrátor slave zariadenia. Multivibrátor  prečíta dáta približne 30 µs po tom, čo dobežná hrana skončí. Vnútorne hodiny slave zariadenia sú jednoduché analógove hodiny. Tie majú určitú analógovu toleranciu, čo ovplyvňuje jeho presnosť. Z toho dôvodu sa pulzy počítajú v rozmedzí určitých hraníc a z toho istého dôvodu musia byť pulzy logickej nuly dlhé 60 µs, a súčasne pulzy logickej jednotky nesmú byť dlhšie ako 15 µs.</p>
                        <p>Keď príjmame dáta, master vyšle 1-15µs dlhý pulz logickej nuly pre každý bit. Ak chce slave poslať logickú jednotku, nerobí nič, čo znamená, že sa zbernica znovu zdvihne na logickú jednotku. Ak chce slave poslať logickú nulu, musí podržať zbernicu na nulovom potenciáli po dobu 60 µs.</p>
                        <p>Obviklá postupnosť je, že sa vyšle reset pulz, následne 8-bitov dlhý príkaz, a potom sú dáta príjmane alebo odosielané po skupinkách 8 bitov.</p>
                        <p></p>
                    </article>



                    A short 1-wire bus can be driven from a single digital I/O pin on a microcontroller. A UART can also be used.[6] Specific 1-Wire driver and bridge chips are available. USB "bridge" chips are also available. Bridge chips are particularly useful to drive long (greater than 100 m) cables. Up to 300 meter twisted pairs (i.e. telephone cables) have been tested by the manufacturer. These extreme lengths require adjustments to the pull-up resistances from 5 to 1 kΩ.



                    When a sequence of data is being transferred, errors can be detected with an 8-bit CRC (weak data protection).

                    Many devices can share the same bus. Each device on the bus has a unique 64-bit serial number. The least significant byte of the serial number is an 8-bit number that tells the type of the device. The most significant byte is a standard (for the 1-wire bus) 8-bit CRC.[7]

                    There are several standard broadcast commands, as well as commands used to address a particular device. The master can send a selection command, then the address of a particular device. The next command is executed only by the addressed device.

                    The 1-wire bus enumeration protocol, like other singulation protocols, is an algorithm the master uses to read the address of every device on the bus. Since the address includes the device type and a CRC, recovering the roster of addresses also produces a reliable inventory of the devices on the bus. To find the devices, the master broadcasts an enumeration command, and then an address, "listening" after each bit of an address. If a slave's address matches all the address bits sent so far, it returns a 0. The master uses this simple behavior to search systematically for valid sequences of address bits. The process is much faster than a brute force search of all possible 64-bit numbers because as soon as an invalid bit is detected, all subsequent address bits are known to be invalid. The 64-bit address space is searched as a binary tree, allowing up to 75 devices to be found per second.

                    The location of devices on the bus is sometimes significant. For these situations, a microcontroller can use several pins, or the manufacturer has a 1-Wire device that can switch the bus off or pass it on. Software can therefore explore sequential bus domains.[7]
                </div>



                <div class="block_header_mid">
                    Zdroje:
                </div>
                <div class="block_body">
                    <ul>
                        <li><a href="https://en.wikipedia.org/wiki/1-Wire">https://en.wikipedia.org/wiki/1-Wire</a></li>
                        <li><a href="https://www.arduinoposlovensky.sk/projekty/dallas-ds18b20">https://www.arduinoposlovensky.sk/projekty/dallas-ds18b20</a></li>
                    </ul>
                </div>
            </div>

            <div class="block_container" id="I2C">
                <div class="block_header">
                    I²C
                </div>
                <div class="block_body">
                    I²C
                </div>
            </div>

        </div>
    </main>

    <!-- END OF TEXT BOXING -->
    <div class="validator">
        Slovenská Technická Univerzita &copy; Jakub Švajka
    </div>
</body>
</html>
